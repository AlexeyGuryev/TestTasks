Учет мебели. Описание решения
===========

Ограничения решения
-------------------
При выделении [требований](https://github.com/AlexeyGuryev/TestTasks/blob/master/FurnitureStorage/UseCase.txt) (а также в ходе реализации) были сформулированы ограничения:
* храним состояния только изменений мебели в комнате. даннные о создании/удалении комнаты содержатся в самом объекте комнаты
* нельзя иметь 2 состояния для одной комнаты на одну дату
Последнее ограничение по факту реализуется в конкретном репозитории, потому может быть уточнено/доработано без вмешательства в бизнес-логику

Описание элементов решения
--------------------------
Первым был создан каркасный проект бизнес-логики: **StorageLogic**, содержащий
* доменные модели
* сервис
* исключения логики
* контракт репозитория

Также были созданы
* проект **StoragePersistence**, содержащий in-memory репозиторий, ставший впоследствии заглушкой репозитория для тестов
* проект тестов: **StorageLogic.Test**, содержащий юнит-тесты, оказавшиеся в последствии интеграционными, т.к. в большинстве случаев зависели от реализиации in-memory репозитория. Когда впоследствии in-memory репозиторий стал заглушкой - часть тестов остались неактуальными, т.к. зависели от реализации сохранения состояния репозитория (недоработка).

Проект **Storage.UI** содержит Asp.Net MVC веб-приложение, реализующее API (на методах контроллеров) и UI проекта. Веб-приложение использует и прямо зависит только от проекта бизнес-логики. Зависимость от репозиториев в StoragePersistence - только в модуле, подключающим через AutoFac нужную реализацию репозитория (сейчас выбран EntityFramework-репозиторий).
Веб-приложение построено на ajax-запросах клиентской логики (на knocout.js), вызывающей контроллеры, передавая параметры/получая данные в JSON-формате.
Валидация вводимых данных выполняется только на сервере, с передачей и обработкой логических исключений и ошибок валидации на клиенте. Обработка системных исключений не реализована.

В последнюю очередь был описан EntityFramework-репозиторий в проекте **StoragePersistence**, содержащий:
* классы-сущности с маппингом в объекты доменной модели 
* реализацию репозитория согласно контракту бизнес-логики
В проекте можно увидеть, что структуры данных сущностных моделей EF-репозитория и доменной-модели отличаются, т.к. сущностные модели реализованы с учетом возможности хранения в БД.
